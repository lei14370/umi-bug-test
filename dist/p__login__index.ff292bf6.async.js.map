{"version":3,"file":"p__login__index.ff292bf6.async.js","mappings":"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","sources":["webpack:///./node_modules/@ant-design/icons-svg/es/asn/EyeTwoTone.js","webpack:///./node_modules/@ant-design/icons/es/icons/EyeTwoTone.js","webpack:///./src/pages/login/index.less?378c","webpack:///./node_modules/ahooks/es/utils/index.js","webpack:///./node_modules/ahooks/es/utils/isDev.js","webpack:///./node_modules/ahooks/es/useMount/index.js","webpack:///./src/pages/login/index.tsx"],"sourcesContent":["// This icon file is generated automatically.\nvar EyeTwoTone = { \"icon\": function render(primaryColor, secondaryColor) { return { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M81.8 537.8a60.3 60.3 0 010-51.5C176.6 286.5 319.8 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c-192.1 0-335.4-100.5-430.2-300.2z\", \"fill\": secondaryColor } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M512 258c-161.3 0-279.4 81.8-362.7 254C232.6 684.2 350.7 766 512 766c161.4 0 279.5-81.8 362.7-254C791.4 339.8 673.3 258 512 258zm-4 430c-97.2 0-176-78.8-176-176s78.8-176 176-176 176 78.8 176 176-78.8 176-176 176z\", \"fill\": secondaryColor } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258s279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766z\", \"fill\": primaryColor } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M508 336c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z\", \"fill\": primaryColor } }] }; }, \"name\": \"eye\", \"theme\": \"twotone\" };\nexport default EyeTwoTone;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport EyeTwoToneSvg from \"@ant-design/icons-svg/es/asn/EyeTwoTone\";\nimport AntdIcon from '../components/AntdIcon';\nvar EyeTwoTone = function EyeTwoTone(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: EyeTwoToneSvg\n  }));\n};\nEyeTwoTone.displayName = 'EyeTwoTone';\nexport default /*#__PURE__*/React.forwardRef(EyeTwoTone);","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"container___ldtvs\",\"bg-wrapper\":\"bg-wrapper___JKSrC\",\"bgWrapper\":\"bg-wrapper___JKSrC\",\"header\":\"header___j_Z_f\",\"login-wrap\":\"login-wrap___V57mX\",\"loginWrap\":\"login-wrap___V57mX\",\"form-wrapper\":\"form-wrapper___CLfyk\",\"formWrapper\":\"form-wrapper___CLfyk\",\"label\":\"label___PEXy5\",\"verification-code-warp\":\"verification-code-warp___J9I2l\",\"verificationCodeWarp\":\"verification-code-warp___J9I2l\",\"verification-code-content\":\"verification-code-content___wX6ef\",\"verificationCodeContent\":\"verification-code-content___wX6ef\",\"verification-code\":\"verification-code___eIcNV\",\"verificationCode\":\"verification-code___eIcNV\",\"login-form\":\"login-form___ljoQj\",\"loginForm\":\"login-form___ljoQj\",\"login-form-button\":\"login-form-button___gh2Ms\",\"loginFormButton\":\"login-form-button___gh2Ms\",\"form-bg\":\"form-bg___fLOnv\",\"formBg\":\"form-bg___fLOnv\",\"icon\":\"icon___CBYA8\",\"captcha-wrapper\":\"captcha-wrapper___Yq6yq\",\"captchaWrapper\":\"captcha-wrapper___Yq6yq\",\"captcha-input\":\"captcha-input___BrKFV\",\"captchaInput\":\"captcha-input___BrKFV\",\"captcha\":\"captcha___RZMU8\",\"lang-wrapper\":\"lang-wrapper___yhMA3\",\"langWrapper\":\"lang-wrapper___yhMA3\",\"action\":\"action___Yp3jK\"};","export const isObject = value => value !== null && typeof value === 'object';\nexport const isFunction = value => typeof value === 'function';\nexport const isString = value => typeof value === 'string';\nexport const isBoolean = value => typeof value === 'boolean';\nexport const isNumber = value => typeof value === 'number';\nexport const isUndef = value => typeof value === 'undefined';","const isDev = process.env.NODE_ENV === 'development' || process.env.NODE_ENV === 'test';\nexport default isDev;","import { useEffect } from 'react';\nimport { isFunction } from '../utils';\nimport isDev from '../utils/isDev';\nconst useMount = fn => {\n  if (isDev) {\n    if (!isFunction(fn)) {\n      console.error(`useMount: parameter \\`fn\\` expected to be a function, but got \"${typeof fn}\".`);\n    }\n  }\n  useEffect(() => {\n    fn === null || fn === void 0 ? void 0 : fn();\n  }, []);\n};\nexport default useMount;","import React, { useCallback, useRef, useState } from 'react';\nimport { Form, Input, Spin, message, Button } from 'antd';\nimport { EyeInvisibleOutlined, EyeTwoTone } from '@ant-design/icons';\nimport { useModel, history } from 'umi';\n\nimport { utils } from 'md-web-ui';\nimport { login, getCaptcha, getUserInfo } from '@/services/user';\nimport styles from './index.less';\n\nimport { useMount } from 'ahooks';\n\nconst Login: React.FC = () => {\n  const verifyRef = useRef<string>('');\n  const [loading, setLoading] = useState<boolean>(false);\n  const [form] = Form.useForm<API.LoginData>();\n  const { setInitialState } = useModel('@@initialState');\n  const [base64, setBase64] = useState<string>();\n  const [svg, setSvg] = useState<any>();\n  const getCaptchaImage = useCallback(async () => {\n    const { captchaId, data } = await getCaptcha({\n      height: 36,\n      width: 110,\n    });\n    verifyRef.current = captchaId || '';\n    if (data?.includes('data:image/png;base64,')) {\n      setBase64(data);\n      setSvg(null);\n    } else {\n      setBase64(undefined);\n      setSvg(data);\n    }\n  }, []);\n  useMount(() => {\n    document.title = 'login';\n    getCaptchaImage();\n  });\n  const onFinish = useCallback(async () => {\n    const values = await form.validateFields();\n    try {\n      setLoading(true);\n      const loginRes = await login({\n        ...values,\n        captchaId: verifyRef.current,\n      });\n      utils.setStorage('token', loginRes?.token);\n      const userMsg = await getUserInfo();\n      utils.setStorage('userMsg', userMsg);\n\n      setInitialState({\n        currentUser: userMsg,\n        collapsed: false,\n      });\n      setLoading(false);\n\n      message.success('登录成功');\n      history.push('/');\n    } catch (e) {\n      setLoading(false);\n      getCaptchaImage();\n    }\n  }, [form, getCaptchaImage]);\n\n  return (\n    <Spin spinning={loading}>\n      <div className={styles.container}>\n        <div className={styles.bgWrapper}>\n          <img src={require('@/assets/images/login/login-bg.jpg')} />\n        </div>\n        <div className={styles.loginWrap}>\n          <div className={styles.formWrapper}>\n            <div className={styles.header}>\n              <img src={require('@/assets/images/login/logo.png')} />\n            </div>\n            <Form\n              className={styles.loginForm}\n              onFinish={onFinish}\n              size={'middle'}\n              form={form}\n            >\n              <div className={styles.label}>用户名</div>\n              <Form.Item\n                name=\"username\"\n                rules={[\n                  {\n                    required: true,\n                    message: '请输入用户名',\n                  },\n                ]}\n              >\n                <Input />\n              </Form.Item>\n              <div className={styles.label}>密码</div>\n              <Form.Item\n                name=\"password\"\n                rules={[\n                  {\n                    required: true,\n                  },\n                ]}\n              >\n                <Input.Password\n                  iconRender={(visible) =>\n                    visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />\n                  }\n                />\n              </Form.Item>\n              <div className={styles.label}>验证码</div>\n              <div className={styles.verificationCodeWarp}>\n                <Form.Item\n                  name=\"verifyCode\"\n                  className={styles.verificationCodeContent}\n                  rules={[\n                    {\n                      required: true,\n                    },\n                  ]}\n                >\n                  <Input />\n                </Form.Item>\n                <div\n                  className={styles.verificationCode}\n                  onClick={getCaptchaImage}\n                >\n                  {svg ? (\n                    <div\n                      className=\"svg\"\n                      dangerouslySetInnerHTML={{ __html: svg }}\n                    />\n                  ) : (\n                    <img src={base64} alt=\"验证码\" />\n                  )}\n                </div>\n              </div>\n              <Button\n                htmlType=\"submit\"\n                type=\"primary\"\n                className={styles.loginFormButton}\n              >\n                登录\n              </Button>\n            </Form>\n          </div>\n        </div>\n      </div>\n    </Spin>\n  );\n};\n\nexport default Login;\n"],"names":["EyeTwoTone","primaryColor","secondaryColor","props","ref","AntdIcon","isObject","value","isFunction","isString","isBoolean","isNumber","isUndef","fn","Login","verifyRef","useRef","useState","loading","setLoading","Form","form","useModel","setInitialState","base64","setBase64","svg","setSvg","getCaptchaImage","useCallback","getCaptcha","height","width","captchaId","data","current","includes","undefined","useMount","document","title","onFinish","validateFields","values","login","loginRes","utils","token","getUserInfo","userMsg","currentUser","collapsed","message","history","styles","require","required","visible","EyeInvisibleOutlined","__html"],"sourceRoot":""}