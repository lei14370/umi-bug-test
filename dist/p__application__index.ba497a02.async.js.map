{"version":3,"file":"p__application__index.ba497a02.async.js","mappings":"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","sources":["webpack:///./src/components/Page/index.less?59b4","webpack:///./src/components/Page/index.tsx","webpack:///./src/pages/application/index.tsx","webpack:///./src/services/application.ts","webpack:///./src/utils/common.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"page\":\"page___H3pMP\",\"title\":\"title___j7m6E\",\"content\":\"content___fl5JM\"};","import styles from './index.less';\nimport { PropsWithChildren } from 'react';\nimport { Button } from 'antd';\nimport { history } from 'umi';\ntype Props = {\n  title: string;\n  back?: boolean;\n};\nconst Home = (props: PropsWithChildren<Props>) => {\n  const { title, children, back = false } = props;\n  return (\n    <div className={styles.page}>\n      <div className={styles.title}>\n        {back ? (\n          <Button style={{ marginRight: 10 }} onClick={() => history.back()}>\n            返回\n          </Button>\n        ) : null}\n        {title}\n      </div>\n      <div className={styles.content}>{children}</div>\n    </div>\n  );\n};\nexport default Home;\n","import type { ActionType, ProColumns } from '@ant-design/pro-components';\n\nimport { useMemo, useRef } from 'react';\nimport { AuthButton } from 'md-web-ui';\nimport { history } from 'umi';\n\nimport Page from '@/components/Page';\nimport { tableListRequest } from '@/utils/common';\nimport { ProTable } from '@ant-design/pro-components';\nimport { PlusOutlined } from '@ant-design/icons';\nimport { findPage } from '@/services/application';\nconst PageComponent = () => {\n  const actionRef = useRef<ActionType>();\n  const columns = useMemo<ProColumns[]>(\n    () => [\n      {\n        dataIndex: 'name',\n        title: '应用名称',\n      },\n      {\n        dataIndex: 'appId',\n        title: 'appId',\n      },\n      // {\n      //   dataIndex: 'appSecretKey',\n      //   title: 'appSecretKey',\n      //   hideInSearch: true,\n      // },\n      {\n        dataIndex: 'status',\n        title: '状态',\n        valueType: 'select',\n        valueEnum: {\n          1: '已启用',\n          0: '已停用',\n        },\n      },\n      {\n        dataIndex: 'createTime',\n        title: '创建时间',\n        hideInSearch: true,\n      },\n      {\n        title: '操作',\n        key: '操作',\n        hideInForm: true,\n        hideInSearch: true,\n        render: (row: any) => {\n          return [\n            <AuthButton\n              type=\"link\"\n              key=\"3\"\n              onClick={() => {\n                history.push('/application/detail?id=' + row.id);\n              }}\n            >\n              编辑\n            </AuthButton>,\n          ];\n        },\n      },\n    ],\n    [],\n  );\n\n  return (\n    <Page title=\"用户管理\">\n      <ProTable\n        columns={columns}\n        actionRef={actionRef}\n        rowKey=\"id\"\n        headerTitle={[\n          <AuthButton\n            type=\"primary\"\n            key=\"1\"\n            icon={<PlusOutlined />}\n            onClick={() => {\n              history.push('/application/detail');\n            }}\n          >\n            新增\n          </AuthButton>,\n        ]}\n        request={tableListRequest(findPage)}\n      />\n    </Page>\n  );\n};\n\nexport default PageComponent;\n","// @ts-ignore\n/* eslint-disable */\nimport request from '@/utils/request';\n\n/** 分页 GET */\nexport async function findPage(params: any) {\n  return request<API.API_RESULT<any>>('/monitor/application/page', {\n    method: 'GET',\n    params: {\n      ...params,\n    },\n  });\n}\n/**  新增 POST */\nexport async function add(data: any) {\n  return request<API.API_RESULT<any>>('/monitor/application/add', {\n    method: 'POST',\n    data,\n  });\n}\n/**  编辑 POST */\nexport async function update(data: any) {\n  return request<API.API_RESULT<any>>('/monitor/application/update', {\n    method: 'POST',\n    data,\n  });\n}\n/**  详情 GET */\nexport async function getInfo(params: any) {\n  return request<API.API_RESULT<any>>('/monitor/application/info', {\n    method: 'GET',\n    params: {\n      ...params,\n    },\n  });\n}\n/**  list GET */\nexport async function getList(params: any) {\n  return request<API.API_RESULT<any>>('/monitor/application/list', {\n    method: 'GET',\n    params: {\n      ...params,\n    },\n  });\n}\n","import { isEmpty, isNil } from 'lodash';\nimport moment from 'moment';\ntype CommonSearchParams<T> = {\n  size: number | undefined;\n  page: number | undefined;\n} & T;\n\ntype CommonList<T = Record<string, any>> = {\n  /** 数据 */\n  list: T[];\n  /** 总量 */\n  pagination: {\n    page: number;\n    size: number;\n    total: number;\n  };\n};\nexport const dateTypeParamFormatter = (day: any, index: number) => {\n  let $day: any = day;\n  if (isNil(day)) {\n    return '';\n  }\n  if ($day && (/\\d{4}-\\d{2}-\\d{2}/.test($day) || $day instanceof moment)) {\n    $day =\n      index > 0\n        ? moment($day).format('YYYY-MM-DD 23:59:59')\n        : moment($day).format('YYYY-MM-DD 00:00:00');\n  }\n  return $day;\n};\nexport const searchQueryFormatter = (query: Record<string, any>) => {\n  const data: Record<string, any> = { ...query };\n  for (const key in data) {\n    if (data.hasOwnProperty(key) && data[key] === '') {\n      delete data[key];\n    } else if (data[key] instanceof Array) {\n      if (data[key].length > 0) {\n        data[key] = (data[key] as any[])\n          .map((i, index) => {\n            return dateTypeParamFormatter(i, index);\n          })\n          .join(',');\n      }\n    }\n  }\n  return data;\n};\nexport function formatMoney(money: number | string) {\n  if (isEmpty(money.toString())) {\n    return '';\n  }\n  const reg = /(?=(\\B)(\\d{3})+$)/g;\n  return money.toString().replace(reg, ',');\n}\nexport function tableListRequest<T = any, P = any>(\n  convertFunction: (\n    data: CommonSearchParams<P>,\n    options?: Record<string, any>,\n  ) => Promise<CommonList<T> | undefined>,\n  defaultParams?: Record<string, any>,\n) {\n  return async (\n    _data: P & {\n      pageSize?: number;\n      current?: number;\n    } & Record<string, any>,\n  ) => {\n    const data = { ..._data };\n    const pageNum = data.current;\n    delete data.current;\n    const $data = searchQueryFormatter(data) as P & {\n      pageSize?: number;\n    } & Record<string, any>;\n    const res = await convertFunction({\n      ...defaultParams,\n      page: pageNum,\n      size: data.pageSize,\n      ...$data,\n    });\n    console.log(res);\n    return {\n      data: res?.list,\n      total: res?.pagination?.total,\n    };\n  };\n}\n"],"names":["Home","props","title","children","back","styles","marginRight","history","PageComponent","actionRef","useRef","columns","useMemo","dataIndex","valueType","valueEnum","hideInSearch","key","hideInForm","render","row","id","tableListRequest","findPage","params","request","method","add","data","update","getInfo","getList","dateTypeParamFormatter","day","index","$day","isNil","test","moment","format","searchQueryFormatter","query","hasOwnProperty","Array","length","map","i","join","formatMoney","money","isEmpty","toString","reg","replace","convertFunction","defaultParams","_data","pageNum","current","$data","page","size","pageSize","res","console","log","list","total","pagination"],"sourceRoot":""}